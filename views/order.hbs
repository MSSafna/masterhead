<style>
  tr:hover {
    background-color: beige;

  }
</style>

<div class="container">
   {{#if orders}}
  <table class="table">
    <thead>
      <th><strong>Order.ID</strong></th>
      <th><strong>Method</strong></th>

      <th><strong>Date</strong></th>
      <th><strong>Order status</strong></th>
      <th><strong>Options</strong></th>
    </thead>
    <tbody>
     
    {{#each orders}}
      <tr>

        <td data-label="S.No" class="col-3">{{this._id}}</td>
        <td data-label="Name">{{this.orderDetails.paymentMethod}}</td>

        <td data-label="Marks%">{{this.orderDetails.date}}</td>

           
         {{#statusColor this.orderDetails.AdminStatus}}
        <td data-label="Staus" style="color: red;" >{{../this.orderDetails.AdminStatus}} </td>
        {{else}}
        <td data-label="Staus" style="color: green;" >{{../this.orderDetails.AdminStatus}}  </td>
        {{/statusColor}}
        <td>
          <button type="button" class="btn btn-info " data-toggle="modal" data-target="#{{this._id}}"> view Details
          </button>
        </td>
            <td>
          
          <a href="/invoice/{{this._id}}">download invoice</a>
          
        </td>
       <td>
        {{#trackOrderDisplay this.orderDetails.AdminStatus}}
       <a href="" style="cursor: not-allowed;" > Track order</a>
        {{else}}
         <a href="/trackorder/{{../this._id}}" class="text-mute">Track order</a>
         {{/trackOrderDisplay}}
       </td>
       

        {{/each}}
        {{else}}
        

    </tbody>
   <div class="page-header text-center" style="background-image: url('assets/images/page-header-bg.jpg')">
                    <div class="container">
                        <h1 class="page-title">You have no order summary</span></h1>
                         
                    </div><!-- End .container -->
                    <a href="/products?page=1" class="btn btn-outline-dark-2 btn-block mb-3"><span>CONTINUE
                                            SHOPPING</span><i class="icon-refresh"></i></a>
                </div><!-- End .page-header -->
        {{/if}}
  </table>
</div>
<!-- Button trigger modal -->
{{#each orders}}


<!-- Modal -->
<div class="modal fade" id="{{this._id}}" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"
  aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header ">

        <h5 class="modal-title d-flex justify-content-center align-items-center" id="exampleModalLongTitle">Order
          Details</h5>

        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="card-body p-0">
        <div class="card shadow-0 border mb-4">
          <div class="card-body p-3">
            <div class="row">
              <div class="col-md-3 text-center d-flex justify-content-center align-items-center mb-2">
                Product Image
              </div>
              <div class="col-md-3 text-center d-flex justify-content-center align-items-center mb-2">
                Product Name
              </div>
              <div class="col-md-3 text-center d-flex justify-content-center align-items-center mb-2">
                Quantity
              </div>
              <div class="col-md-3 text-center d-flex justify-content-center align-items-center mb-2">
                Price
              </div>
              
            </div>
           {{#each this.productList}}
            <hr class="mb-4" style="background-color: #e0e0e0; opacity: 1;">
            <div class="row">
              <div class="col-md-3 text-center d-flex justify-content-center align-items-center ">
                <img src="/images/product/{{this.prodetails.img.[0]}}" class="img-fluid" width="80px" alt="Phone">
              </div>

              <div class="col-md-3 text-center d-flex justify-content-center align-items-center">
                <p class="text-black mb-0 larger">{{this.prodetails.name}}</p>
              </div>
              <div class="col-md-3 text-center d-flex justify-content-center align-items-center">
                <p class="text-black mb-0 larger">{{this.proQty}}</p>
              </div>
              {{#if this.prodetails.offerPercentage}}
              
              <div class="col-md-3 text-center d-flex justify-content-center align-items-center">
                <p class="text-muted mb-0 larger">₹{{this.prodetails.originalPrice}}</p>
                
              </div>
              <div class="col-md-3 text-center d-flex " style="color:green;font-weight: 700;margin-left:60%;">Offer&nbsp;Price
               <p class="text-muted mb-0 larger" style="font-weight: 500; color: green;">&nbsp;&nbsp;₹{{this.prodetails.price}}</p></div>
              {{else}}
           
              
              <div class="col-md-3 text-center d-flex justify-content-center align-items-center"> 
              <p class="text-muted mb-0 small" >₹{{this.prodetails.price}}</p></div>
             
              {{/if}}
            
             
            </div>
            {{/each}}

          </div>
        </div>
        <div class="ml-5">

          <div class="d-flex justify-content-between pt-2">
            <p class="fw-bold mb-0"><strong>Order Details </strong> </p>
            <p class="col-2 text-muted mb-0"></p>
          </div>


          <div class="d-flex justify-content-between">
            <p class="text-muted mb-0">Purchase Date : {{this.orderDetails.date}}
            </p>
            <p class="col-2 text-muted mb-0"></p>
          </div>
          <p><strong>Delivery Address:</strong> <br>
            {{this.orderDetails.Address.fullName}},{{this.orderDetails.Address.Address}}
          </p>

          <p> <span></span>
            {{this.orderDetails.Address.town}},{{this.orderDetails.Address.state}}
          </p>
          <p> <span></span>
            email: {{this.orderDetails.Address.email}} <br>
            Pincode: {{this.orderDetails.Address.postcode}},
            <br>
            Phone: {{this.orderDetails.Address.phone}}
            
          </p>
           {{#if this.orderDetails.couponDetails}}
           <p style="color: green;font-weight:500;"> Coupon Offer :&nbsp;{{this.orderDetails.couponDetails.couponPercentage}}% off</p>
           {{/if}}
        </div>
      </div>
      <div class="text-center">
         

        {{#logicalOr this.orderDetails.AdminStatus }}
        <button  class="btn btn-danger text-white rounded-pill" id="cancelOrder{{../this._id}}" onclick="cancelOrder('{{../this._id}}')"
          >Cancel Order</button>
        {{/logicalOr }}

        {{#ifEquals this.orderDetails.AdminStatus 'order cancelled'}}
        <button  class="btn btn-danger text-white rounded-pill disabled" id="cancelOrder{{../this.orderDetails._id}}"
          >Cancel Order</button>
        {{/ifEquals}}

        {{#ifEquals this.orderDetails.AdminStatus 'pending'}}
            <button  class="btn btn-danger text-white rounded-pill disabled" id="cancelOrder{{../this.orderDetails._id}}"
              >Cancel Order</button>
             {{/ifEquals}}

        {{#ifEquals this.orderDetails.AdminStatus 'Delivered'}}
        <a href="/returnProductDetails/{{../this._id}}"  class="btn btn-danger text-white rounded-pill" id="cancelOrder{{../this._id}}" 
              >Return Order</a>    
        {{/ifEquals}}

        {{#ifEquals this.orderDetails.AdminStatus 'return product'}}
        <a href="/returnProductDetails/{{../this._id}}"  class="btn btn-danger text-white rounded-pill disabled" id="cancelOrder{{../this._id}}" 
              >Return Order</a>    
        {{/ifEquals}}
        {{#ifEquals this.orderDetails.AdminStatus 'Refund'}}
        <a href="/returnProductDetails/{{../this._id}}"  class="btn btn-danger text-white rounded-pill disabled" id="cancelOrder{{../this._id}}" 
              >Return Order</a>    
        {{/ifEquals}}
        
        {{#ifEquals this.orderDetails.AdminStatus 'Return confirmed'}}
        <a href="/returnProductDetails/{{../this._id}}"  class="btn btn-danger text-white rounded-pill disabled" id="cancelOrder{{../this._id}}" 
              >Return Order</a>    
        {{/ifEquals}}
        
        
      </div>
    </div>
    <div class="card-footer border-0 px-4 py-5"
      style="background-color: #ffffff; border-bottom-left-radius: 10px; border-bottom-right-radius: 10px;">
      <h3 class="d-flex align-items-center justify-content-end text-black text-uppercase mb-0">
        Total Amount
      </h3><br>
      <h5><span class="h2 mb-0 ms-2 float-right">₹{{this.orderDetails.total}}</span>
      </h5>

    </div>
  </div>
</div>

{{/each}}